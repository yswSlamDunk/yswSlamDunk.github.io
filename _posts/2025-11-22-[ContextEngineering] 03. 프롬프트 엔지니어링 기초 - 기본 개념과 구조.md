---
layout : single
title : "[ContextEngineering] 03. 프롬프트 엔지니어링 기초 - 기본 개념과 구조"
categories : [PromptEngineering, LLM]
tag : [컨텍스트 엔지니어링, 프롬프트 엔지니어링, 언어모델의 기본 동작 원리, 강수진 박사의 프롬프트·컨텍스트 엔지니어링 아카데미]
---

## 기본 개념과 구조
### 01. 언어모델의 기본 동작 원리
#### 언어 모델의 핵심 동작 과정
* 언어 모델이 텍스트를 생성하는 과정은 크게 4단계
  * 1 단계: 토큰 임베딩: 입력 문장은 토큰으로 쪼개져 벡터(임베딩)로 변환되고, 위치 정보가 더해져 모델에 들어감
  * 2 단계: 변환(트랜스포머 디코더 블록 반복): "마스크드 멀티헤드 어텐션 -> 피드포워드 네트워크 -> 잔차연결 및 정규화"가 여러 층 반복되며, 이전 토큰들만 볼 수 있도록(마스킹) 설계되어 다음 토큰을 예측할 표현을 생성
  * 3 단계: 어텐션 핵심 쿼리(Q), 키(K), 값(V)로 문맥을 요약하는 주의를 여러 머리(헤드)로 병렬 계산해, 다양한 관점의 문맥 정보를 결합
  * 4 단계: 다음 토큰 예측, 생성 루프: 마지막에 선형변환+소프트맥스로 다음토큰 분포를 만들고, 샘플링/탐-k 등으로 한 토큰을 선택, 추가합니다.
* 이 과정으로 인해 프롬프트의 구조와 맥락의 중요성 파악 가능
  * 어텐션은 문맥의 구조를 기반으로 예측하기 때문에 프롬프트의 문맥, 단어가 달라지면 결과값이 달라짐
  * 모델은 대규모 데이터셋을 기반으로 학습하는데, 해당 과정에서 자주 사용되는 단어, 구조가 있음

### 02. 프롬프트 설계 기본요소
```python
"""
# 지시문:
Sentiment Analysis를 해야 해.
아래 텍스트를 읽고 '긍정', '중립', '부정' 중에서 구분해줘.

# Text: {text}

# 출력 지시문:
1. JSON Only.
2. SENTIMENT ONLY.
{{sentiment}}: {{분석결과}}
"""
```
* 강건성: 프롬프트의 결과가 일정하게 출력되는 정도를 나타낼때 사용
* 위의 프롬프트는 대문자를 사용을 통한 강조의 효과와 ' ' 기호를 사용한 강건성을 높힌 구조화된 프롬프트