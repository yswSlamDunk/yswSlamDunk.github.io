---
layout : single
title : "[SQLD] 01. 데이터 모델링의 이해"
categories : [Certificate, SQLD]
tag : [데이터 모델링, ERD, 스키마, 엔터티, 속성, 관계, 식별자]
---

## 데이터 모델링의 이해
### 데이터 모델링
* 현실 세계를 데이터베이스로 표현하기 위해서 추상화하는 과정
* 고객의 업무 프로세스 이해 필요
* 데이터 모델링 표기법을 사용해서 모델링 진행
* 이해하기 쉽게 복잡하지 않도록 모델링 권장
* 고객의 업무 프로세스를 추상화하고 소프트웨어 분석, 설계하면서 점점 더 상세화

### 데이터 모델링의 특징
* 추상화: 추상화는 공통적인 특징을 찾고 간략하게 표현
* 단순화: 누구나 이해할 수 있게 표현
* 명확화: 의미적 모호하지 않도록 표현(한가지 의미)

### 모델링 단계
#### 개념적 모델링(Conceptual Data Modeling)
* 고객의 비즈니스 프로세스 분석하고 업무 전체에 대해서 데이터 모델링 수행
* 중요한 부분을 위주로 모델링 진행
* 기술적 용어는 가급적 사용 지양
* 엔터티와 속성을 도출하여 개념적 ERD 작성
* 전사적 관점에서 기업 데이터 모델링
* 추상화 수준이 가장 높은 수준의 모델링
* 업무 측면에서 모델링

#### 논리적 모델링(Logical Data Modeling) 
* 개념적 모델링을 논리적 모델링으로 변환하는 작업
* 식별자를 도출하고 필요한 모든 릴레이션 정의
* 정규화를 수행해서 데이터 모델의 독립성 확보
* 특정 데이터베이스 모델에 종속
* 식별자 정의, 관계, 속성 모두 표현
* 정규화를 통해 재사용성 제고

#### 물리적 모델링(Physical Modeling 
* 데이터 베이스를 실제 구축하는 과정
* 테이블, 인덱스, 함수 등을 생성
* 성능, 보안, 가용성 고려하여 구축


### 데이터 모델링을 위한 ERD(Entity Relationship Diagram)
* 엔터티와 엔터티 간의 관계를 정의하는 모델링 방법

#### ERD 작성 절차
1. 엔터티 도출
2. 엔터티 배치
    * 중요한 엔터티를 왼쪽 상단에 배치
3. 엔터티 간의 관계 설정
4. 관계명 서술
    * 엔터티 간의 어떤 행위나 존재가 있는지 표현
5. 관계 참여도를 표현
    * 한 개의 엔터티와 다른 엔터티 간의 참여하는 관계수를 의미
    * 고객은 여러 개의 계좌 개설 가능
6. 관계의 필수 여부 표현
    * 모든 고객은 반드시 하나의 계좌를 개설해야 한다.

### 데이터 모델링 고려사항
* 데이터 모델의 독립성
    * 중복된 데이터 제거
* 고객 요구사항의 표현
* 데이터 품질 확보
    * 데이터 표준을 정의하고 표준 준수율을 관리 필요

### 3충 스키마(3-Level Schema)
* 사용자, 설계자, 개발자가 데이터베이스를 보는 관점에 따라 데이터베이스를 기술하고 이들간의 관계를 정의한 ANSI 표준
* 3층 스키마는 데이터베이스의 독립성 확보 방안
* 데이터 복잡도 감소, 데이터 중복 제거, 사용자 요구사항 변경에 따른 대응력 향상, 관리 및 유지보수 비용 절감 등의 장점
* 3단계 계층으로 분리해서 독립성을 확보하는 방법으로 각 계층을 뷰(View)라고도 함
* 논리적 독립성
    * 개념 스키마가 변경되더라도 외부 스키마가 영향을 받지 않는 것
* 물리적 독립성
    * 내부 스키마가 변경되더라도 개념 스키마가 영향을 받지 않는 것

### 3층 스키마의 구조
* 외부 스키마
    * 사용자 관점, 업무상 관련이 있는 데이터 접근
    * 관련 데이터베이스의 뷰(View)를 표시
    * 응용 프로그램이 접근하는 데이터베이스를 정의
* 개념 스키마
    * 설계자 관점, 사용자 전체 집단의 데이터베이스 구조
    * 전체 데이터베이스 내의 규칙과 구조 표현
    * 통합적 데이터베이스 구조
* 내부 스키마
    * 개발자 관점, 데이터베이스의 물리적 저장 구조
    * 데이터 저장 구조, 레코드 구조, 필드 정의, 인덱스 등의 의미

### 엔터티(Entity)
* 개념, 사건, 장소 등의 명사
* 저장되고 관리 되어야 하는 데이터의 집합
* 고객의 비즈니스 프로세스에서 관리되어야 하는 정보를 추출

### 엔터티의 특징
* 식별자
    * 엔터티는 유일한 식별자 필요
    * ex. 회원ID, 계좌번호
* 인스턴스 집합
    * 2개 이상의 인스턴스 필요
    * 즉, 2명 이상의 고객이 있어야 함
* 속성
    * 엔터티는 속성을 가지고 있음
    * ex. 이름, 성별, 나이 등
* 관계
    * 엔터티는 다른 엔터티와 최소한 한 개 이상 관계가 있어야 함
    * 고객은 계좌를 개설 가능
* 업무
    * 엔터티는 업무에서 관리되어야할 집합
    * 고객, 계좌

### 엔터티 종류
* 엔터티 종류는 유형과 무형, 발생시점에 따른 종류로 나누어 짐

#### 유형과 무형에 따른 엔터티 종류
* 유형 엔터티
    * 업무에서 도출되어 지속적으로 사용되는 엔터티
    * 고객, 강사, 사원
* 개념 엔터티
    * 유형 엔터티는 물리적 형태가 있지만, 개념 엔터티는 물리적 형태 없음
    * 거래소 종목, 코스닥 종목, 생명보험 상품
* 사건 엔터티
    * 비즈니스 프로세스를 실행하면서 생성되는 엔터티
    * 주문, 체결, 취소주문, 수수료 청구 등

#### 발생 시점에 따른 엔터티 종류 
* 기본 엔터티
    * 키 엔터티
    * 다른 엔터티로부터 영향을 받지 않고 독립적으로 생성되는 엔터티
    * ex. 고객, 상품, 부서
* 중심 엔터티
    * 기본 엔터티와 행위 엔터티 간의 중간에 있는 엔터티
    * 기본 엔터티로부터 발생되고 행위 엔터티를 생성하는 것
    * ex. 계좌, 주문, 취소, 체결
* 행위 엔터티
    * 두 개 이상의 엔터티로부터 발생
    * 주문 이력, 체결 이력

### 속성
* 엔티티가 필요한 정보 항목
* 더이상 분리되지 않는 단위
* 업무에서 관리되는 정보
* 속성은 하나의 값만 가짐
* 주식별자에게 함수적으로 종속

### 속성의 종류
#### 분해 여부에 따른 속성의 종류 
* 단일 속성
    * 하나의 의미로 구성된 것
    * ex. 회원ID, 이름
* 복합 속성
    * 여러 개의 의미가 있는 것
    * ex. 주소는 시, 군, 동으로 분해 가능
* 다중값 속성
    * 속성에 여러 개의 값을 가질 수 있는 것
    * ex. 상품 리스트
    * 다중값 속성은 엔터티로 분해


### 관계
* 엔터티 간의 관련성을 의미하며, 존재 관계와 행위 관계로 분류

#### 관계의 종류 
* 존재 관계
    * ex. 고객이 은행에 회원가입할 경우, 관리점이 할당되고, 그 할당된 관리점에서 고객을 관리
* 행위 관계
    * 엔터티 간에 어떤 행위가 있는것
    * ex. 증권회사는 계좌를 개설하고 주문을 발주

### 관계 차수(Relation Cardinality)
* 두 개의 엔터티 간에 관계에 참여하는 수
* ex. 한 명의 고객은 여러 개의 계좌를 개설 가능

#### 관계 차수의 종류 
* 1대1 관계
    * 완전 1대1 관계, 선택적 1대1 관계가 있음
    * 완전 1대1 관계는 반드시 값을 가지는 관계
    * 선택적 1대1 관계 예시
        * ex. 한 명의 고객은 하나의 고객등급이 부여되거나 고객 등급이 없을 수 있다.
* 1대N 관계
    * ex. 한명의 고객은 여러 개의 계좌를 가질 수 있음
* M대N 관계
    * ex. 한 명의 학생은 여러 개의 과목 수강가능. 반대로, 한 개의 과목은 여러 명의 학생이 수강 가능
    * M대N 관계의 Join은 카데시안 곱이 발생하여, 정규화를 통해 1대M, 또는 N대1로 해소해야 함

* 필수적 관계와 선택적 관계
    * 필수적 관계는 반드시 하나는 포함해야하는 관계. 선택적 관계는 없을 수 있고 있을 수 있음
    * 필수적 관계는 '|'로 표현, 선택적 관계는 'O'로 표현


### 식별 관계와 비식별 관계
* 외래키를 사용하여 테이블간의 관계를 정리해줄 때, 사용하는 방법

#### 식별관계
* 식별 관계란, 부모 테이블의 기본키 또는 윤크 키를 자식 테이블이 자신의 기본키로 사용하는 관계
* 강한 개체와 약한 개체 두가지 개체로 분류 가능
* 강한 개체는 어떤 다른 엔터티에게 의존하지 않고 독립적으로 존재
* 강한 개체는 다른 엔터티와 관계를 가질 때 다른 엔터티에게 기본키 공유
* 식별 관계는 실선으로 표현
* ex. 자동차 테이블, 바퀴 테이블의 경우
    * 바퀴 테이블은 자동차 테이블의 기본키인 자동차 아이디 컬럼을 기본키에 사용
    * 바퀴 테이블은 어떤 자동차의 어떤 바퀴에 대한 정보를 저장하는 테이블

#### 비식별 관계
* 비식별 관계는 강한 개체의 기본키를 다른 엔터티의 기본키가아닌 일반 컬럼으로 관계를 가지는 것
* ex. 부서 테이블과 사원 테이블
    * 사원 테이블은 부서 테이블의 기본 컬럼인 부서 코드를 기본키로 사용하지 않고 일반 칼럼에 사용
    * 사원 테이블에서 신규 사원인 경우, 부서가 없을 수 있음

### 앤터티 식별자
* 식별자는 엔터티를 대표할 수 있는 유일성을 만족하는 속성

#### 주식별자(기본키, Primary Key)
* 최소성
* 대표성: 엔터티를 대표할 수 있어야 함
* 유일성: 유일하게 식별
* 불변성: 자주 변경되지 않아야 함

#### 키의 종류
* 기본키: 엔터티를 대표할 수 있는 키
* 후보키: 유일성과 최소성을 만족하는 키
* 슈퍼키: 유일성은 만족하지만 최소성을 만족하지 않는 키
* 대체키: 여러 개의 후보키 중에서 기본키를 선정하고 남은 키
* 외래키: 참조 무결성(Referential Integrity)을 확인하기 위해서 사용되는 키

### 식별자의 종류
* 식별자는 대표성, 생성 여부, 속성의 수, 대체 여부로 분류됨
#### 식별자의 대표성
* 주식별자
    * 유일성과 최소성을 만족하면서 엔터티를 대표하는 식별자
    * 다른 엔터티와 참조 관계로 연결 가능
* 보조 식별자
    * 유일성과 최소성은 만족하지만 대표성을 만족하지 못하는 식별자

#### 생성 여부
* 내부 식별자
    * 엔터티 내부에서 스스로 생성되는 식별자
* 외부 식별자
    * 다른 엔터티와의 관계로 인해 만들어지는 식별자
    * 외래키를 기본키로 사용한 경우

#### 속성의 수
* 단일 식별자
    * 하나의 속성으로 구성
* 복합 식별자
    * 두 개 이상의 속성으로 구성

#### 대체 여부
* 주문 프로세스에서 같은 상품을 둘 이상 주문하지 못한다면, 본질 식별자(주문번호, 주문순서)를 쓸 수 있지만, 인조식별자(주문상품번호)를 사용할 수 있음
* 본질 식별자
    * 비즈니스 프로세스에서 만들어지는 식별자
* 인조 식별자
    * 인위적으로 만들어지는 식별자
